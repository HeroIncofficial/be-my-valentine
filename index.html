<!--# valentines_pydroid_magical.py
import http.server
import socketserver
import webbrowser -->

# ----- HTML content -----
html_content = """
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Will you be my Valentine?</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root {
  --bg1: #ff1744;
  --bg2: #ff5c8a;
  --card: rgba(255,255,255,0.12);
  --yes: #e6002e;
  --yesHover: #ff1744;
}

/* üåπ Petals container */
#petals {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 3;
}
/* üåπ Petals style */
.petal {
  position: absolute;
  width: 12px;
  height: 12px;
  background: radial-gradient(circle at 30% 30%, #ff8fab, #ff3b5c);
  border-radius: 50% 40% 60% 50%;
  opacity: 0.8;
  pointer-events: none;
  animation: fall linear forwards, sway ease-in-out infinite, rotatePetal linear infinite;
}
@keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
@keyframes sway { 0% { margin-left:0; } 50% { margin-left:30px; } 100% { margin-left:0; } }
@keyframes rotatePetal { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

/* Soft sparkle behind petals */
body::before {
  content:"";
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.12) 0 15%, transparent 16%),
    radial-gradient(circle at 70% 60%, rgba(255,255,255,0.10) 0 14%, transparent 15%);
  pointer-events:none;
  z-index:1;
}

/* Main content */
* { box-sizing: border-box; }
body {
  margin:0;
  min-height:100svh;
  display:grid;
  place-items:center;
  background: radial-gradient(circle at top, var(--bg2), var(--bg1));
  font-family: system-ui, sans-serif;
  overflow:hidden;
  padding:16px;
}
.watermark{
  position: fixed;
  top: 10px;
  right: 15px;
  font-size: 12px;
  font-weight: bold;
  color: #ffffffcc;
  z-index: 9999;
}
#confettiCanvas {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 9999;
}
.card {
  width: min(720px, 92vw);
  padding: 26px 22px;
  background: var(--card);
  backdrop-filter: blur(10px);
  border-radius: 22px;
  text-align: center;
  box-shadow: 0 18px 60px rgba(0,0,0,.15);
  position: relative;
  z-index: 4;
}
.art {
  width: min(260px, 80vw);
  margin: 0 auto 10px;
  display: block;
  filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
}
h1 { font-size: clamp(26px, 4vw, 44px); margin: 12px 0 18px; }
.button-zone { position: relative; width: min(520px, 92%); height: 150px; margin: 0 auto; touch-action: none; }
button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  padding: 16px 24px;
  font-size: 18px;
  font-weight: 800;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,.14);
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  transition: transform .12s ease, background .12s ease;
}
#yesBtn { left:18%; background: var(--yes); color:#fff; }
#yesBtn:hover { background: var(--yesHover); }
#noBtn { left:62%; background:#e5e7eb; color:#111827; }
.hint { margin-top:10px; font-size:13px; opacity:.7; }
.result { display:none; margin-top:18px; animation: pop .35s ease; }
.result h2 { font-size: clamp(30px, 4.5vw, 46px); margin:10px 0; }
.fireworks { width:min(380px,90vw); margin:0 auto; display:block; }
@keyframes pop { from{transform:scale(.96);opacity:0;} to{transform:scale(1);opacity:1;} }
</style>
</head>
<body>
<div id="petals"></div>
<div class="watermark">Hero Inc.</div>
<canvas id="confettiCanvas"></canvas>
<main class="card">
<img class="art" src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" alt="Cute kissing cat"/>
<h1>üíñ Nancy will you be my Valentine?</h1>
<section class="button-zone" id="zone">
  <button id="yesBtn">Yes</button>
  <button id="noBtn">No</button>
</section>
<div class="hint" id="hint">‚ÄúNo‚Äù wants to be left alone üòà</div>
<!-- '<p class="ad-text">
Message me to create your own personalized, modern interactive Valentine request for that special someone.<br>
Sweep your crush, boyfriend, girlfriend, husband, wife off his/her feet and get that YES now. üòâ
</p>
 -->
<section class="result" id="result">
  <h2>YAY! üéâ</h2>
  <img class="fireworks" src="https://media.giphy.com/media/l4pTfx2qLszoacZRS/giphy.gif" alt="Cute romantic man"/>
</section>

<script>
const zone=document.getElementById("zone");
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const result=document.getElementById("result");
const hint=document.getElementById("hint");
const confettiCanvas=document.getElementById("confettiCanvas");

function resizeConfettiCanvas(){
  const dpr=Math.max(1,window.devicePixelRatio||1);
  confettiCanvas.width=Math.floor(window.innerWidth*dpr);
  confettiCanvas.height=Math.floor(window.innerHeight*dpr);
  confettiCanvas.style.width="100vw";
  confettiCanvas.style.height="100vh";
}
resizeConfettiCanvas();
window.addEventListener("resize",resizeConfettiCanvas);
window.addEventListener("orientationchange",()=>setTimeout(resizeConfettiCanvas,150));

const confettiInstance=confetti.create(confettiCanvas,{resize:false,useWorker:true});
function fullScreenConfetti(){
  const end=Date.now()+1600;
  (function frame(){
    confettiInstance({particleCount:12,spread:90,startVelocity:45,ticks:180,origin:{x:Math.random(),y:Math.random()*0.3}});
    if(Date.now()<end) requestAnimationFrame(frame);
  })();
  setTimeout(()=>{confettiInstance({particleCount:300,spread:140,startVelocity:60,ticks:220,origin:{x:0.5,y:0.55}});},300);
}

let yesScale=1;
function growYes(){ yesScale=Math.min(2.2,yesScale+0.1); yesBtn.style.transform=`translateY(-50%) scale(${yesScale})`; }
function clamp(n,min,max){ return Math.max(min,Math.min(max,n)); }
function moveNo(px,py){
  const z=zone.getBoundingClientRect();
  const b=noBtn.getBoundingClientRect();
  let dx=(b.left+b.width/2)-px;
  let dy=(b.top+b.height/2)-py;
  let mag=Math.hypot(dx,dy)||1;
  dx/=mag; dy/=mag;
  let newLeft=(b.left-z.left)+dx*150;
  let newTop=(b.top-z.top)+dy*150;
  newLeft=clamp(newLeft,0,z.width-b.width);
  newTop=clamp(newTop,0,z.height-b.height);
  noBtn.style.left=newLeft+"px";
  noBtn.style.top=newTop+"px";
  noBtn.style.transform="none";
  growYes();
}
zone.addEventListener("pointermove",e=>{
  const b=noBtn.getBoundingClientRect();
  const d=Math.hypot((b.left+b.width/2)-e.clientX,(b.top+b.height/2)-e.clientY);
  if(d<140) moveNo(e.clientX,e.clientY);
});
noBtn.addEventListener("click",e=>e.preventDefault());
yesBtn.addEventListener("click",()=>{
  zone.style.display="none";
  hint.style.display="none";
  result.style.display="block";
  resizeConfettiCanvas();
  fullScreenConfetti();
});

/* üåπ Magical swirling petals */
window.addEventListener("load",()=>{
  const petalBox=document.getElementById("petals");
  function spawnPetal(){
    const petal=document.createElement("div");
    petal.className="petal";
    const size=Math.random()*12+8;
    petal.style.width=size+"px";
    petal.style.height=size+"px";
    petal.style.left=Math.random()*100+"vw";
    petal.style.animationDuration=(5+Math.random()*5)+"s, "+(3+Math.random()*3)+"s, "+(4+Math.random()*4)+"s";
    petal.style.opacity=Math.random()*0.5+0.5;
    petalBox.appendChild(petal);
    setTimeout(()=>petal.remove(),14000);
  }
  setInterval(spawnPetal,250);
});
</script>
</body>
</html>
"""

<!--# ----- SAVE HTML TO FILE -----
filename = "valentine_magical.html"
with open(filename, "w", encoding="utf-8") as f:
    f.write(html_content)

# ----- START LOCAL SERVER AND OPEN BROWSER -----
PORT = 8000
webbrowser.open(f"http://localhost:{PORT}/{filename}")

handler = http.server.SimpleHTTPRequestHandler
with socketserver.TCPServer(("", PORT), handler) as httpd:
    print(f"Serving {filename} at http://localhost:{PORT}")
    httpd.serve_forever()
